// Adiciona aria-current="page" no menu conforme o hash da URL
document.addEventListener('DOMContentLoaded',function(){function e(){const e=window.location.hash||"#home";document.querySelectorAll('nav a[href^="#"]').forEach(t=>{t.getAttribute("href")===e?t.setAttribute("aria-current","page"):t.removeAttribute("aria-current")}),document.querySelectorAll('.mobile-menu a[href^="#"]').forEach(t=>{t.getAttribute("href")===e?t.setAttribute("aria-current","page"):t.removeAttribute("aria-current")})}window.addEventListener("hashchange",e),e();});
// Google Analytics
window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-XXXXXXXXXX');
// Mobile menu toggle
document.addEventListener('DOMContentLoaded',function(){const e=document.querySelector("button.mobile-menu-button"),t=document.querySelector(".mobile-menu");if(e&&t){e.addEventListener("click",()=>{const n=t.classList.contains("hidden");t.classList.toggle("hidden"),e.setAttribute("aria-expanded",n?"true":"false")});}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(n){n.preventDefault();const i=document.querySelector(this.getAttribute("href"));i&&i.scrollIntoView({behavior:"smooth",block:"start"}),t&&!t.classList.contains("hidden")&&t.classList.add("hidden")})});let n=0;document.addEventListener("touchstart",function(e){n=e.touches[0].clientY},{passive:!0}),document.querySelectorAll("button, .touch-target").forEach(e=>{e.addEventListener("touchstart",function(){this.style.transform="scale(0.95)"},{passive:!0}),e.addEventListener("touchend",function(){this.style.transform=""},{passive:!0})});"fonts"in document&&document.fonts.ready.then(()=>{document.body.classList.add("font-loaded")});if("IntersectionObserver"in window){const e=new IntersectionObserver((t,n)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),n.classList.add("loaded"),e.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}const i=document.getElementById("imageModal"),o=document.querySelector(".close");window.openModal=function(){i&&(i.style.display="block",document.body.style.overflow="hidden")},window.closeModal=function(){i&&(i.style.display="none",document.body.style.overflow="auto")},o&&o.addEventListener("click",closeModal),i&&i.addEventListener("click",function(e){e.target===this&&closeModal()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&closeModal()}),window.shareOnFacebook=function(){const e=encodeURIComponent(window.location.href);window.open(`https://www.facebook.com/sharer/sharer.php?u=${e}`,"_blank","width=600,height=400"),"undefined"!=typeof gtag&&gtag("event","share",{method:"Facebook",content_type:"website",content_id:"casa-tuiuiu"})},window.shareOnTwitter=function(){const e=encodeURIComponent(window.location.href),t=encodeURIComponent("Conheça a Casa Tuiuiú em Bonito, MS - Sua hospedagem confortável e segura no Pantanal!"),n=encodeURIComponent("BonitoMS,Pantanal,CasaTuiuiu,Turismo");window.open(`https://twitter.com/intent/tweet?url=${e}&text=${t}&hashtags=${n}`,"_blank","width=600,height=400"),"undefined"!=typeof gtag&&gtag("event","share",{method:"Twitter",content_type:"website",content_id:"casa-tuiuiu"})},window.shareOnWhatsApp=function(){const e=encodeURIComponent(window.location.href),t=encodeURIComponent("Olha que casa incrível para hospedagem em Bonito, MS! Casa Tuiuiú - confortável e segura no Pantanal.");window.open(`https://wa.me/?text=${t}%20${e}`,"_blank"),"undefined"!=typeof gtag&&gtag("event","share",{method:"WhatsApp",content_type:"website",content_id:"casa-tuiuiu"})},window.shareByEmail=function(){const e=encodeURIComponent("Casa Tuiuiú - Hospedagem em Bonito, MS"),t=encodeURIComponent(`Olá!\n\nEncontrei esta casa incrível para hospedagem em Bonito, MS:\n\nCasa Tuiuiú - Sua hospedagem confortável e com segurança em Bonito\n\n${window.location.href}\n\nVale a pena conferir!`);window.location.href=`mailto:?subject=${e}&body=${t}`,"undefined"!=typeof gtag&&gtag("event","share",{method:"Email",content_type:"website",content_id:"casa-tuiuiu"})};if("undefined"!=typeof gtag){let e=0;window.addEventListener("scroll",function(){const t=Math.round(window.scrollY/(document.body.scrollHeight-window.innerHeight)*100);t>e&&t%25==0&&(e=t,gtag("event","scroll",{event_category:"engagement",event_label:`${t}%`,value:t}))}),document.querySelectorAll('a[href*="airbnb"], a[href*="booking"], a[href*="whatsapp"]').forEach(e=>{e.addEventListener("click",function(){const t=this.href.includes("airbnb")?"Airbnb":this.href.includes("booking")?"Booking":"WhatsApp";gtag("event","click",{event_category:"booking",event_label:t,value:1})})})}"performance"in window&&window.addEventListener("load",function(){setTimeout(function(){const e=performance.getEntriesByType("navigation")[0];e&&"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"load",value:Math.round(e.loadEventEnd-e.loadEventStart)})},0)}),"serviceWorker"in navigator,document.querySelector(".skip-link")&&document.querySelector(".skip-link").addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&(t.focus(),t.scrollIntoView({behavior:"smooth"}))}),document.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("focus",function(){this.parentElement.classList.add("focused")}),e.addEventListener("blur",function(){this.parentElement.classList.remove("focused")})}),document.querySelectorAll('a[href^="http"]').forEach(e=>{e.addEventListener("click",function(){this.style.opacity="0.7",this.style.pointerEvents="none",setTimeout(()=>{this.style.opacity="1",this.style.pointerEvents="auto"},2e3)})})});
// Error handling
window.addEventListener("error",function(e){"undefined"!=typeof gtag&&gtag("event","exception",{description:e.error?e.error.toString():"Unknown error",fatal:!1})});
// Connection quality detection
"connection"in navigator&&["slow-2g","2g"].includes(navigator.connection.effectiveType)&&document.body.classList.add("slow-connection");